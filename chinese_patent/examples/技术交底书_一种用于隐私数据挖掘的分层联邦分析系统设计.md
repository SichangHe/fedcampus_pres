# 技术交底书_一种用于隐私数据挖掘的分层联邦分析系统设计

## 1、详细介绍技术背景，并描述已有的与本发明相关的现有技术，说明现有技术的缺点
<!-- 撰写指导：
只写与本发明有关的技术背景以及现有技术、现有技术的缺点。
 -->

频繁数据挖掘是目前大数据挖掘领域中的一个重要方向。传统的频繁数据挖掘要求参与方将本地数据传输给数据中心，并由数据中心统计出频繁数据，例如专利CN110286775A，不同用户通过输入法输入单词，并将信息传输到服务端，服务端将统计来自不同用户的信息分析出用户群体中的常用语。然而，这种传统的频繁数据挖掘方法需要实时传输用户的敏感信息，在数据隐私保护场景下难以实现。专利CN115510071A提出利用中心差分隐私技术给数据库响应结果加噪声再发送给请求方。然而，上述方法依赖于完全可信的数据中心，因为用户的原始敏感数据仍然保留在数据中心上，但在现实中，完全可信的数据中心是无法实现的。
联邦分析技术（Federated Analytics，FA）能够允许服务端在参与方原始数据不出本地的前提下分析多个参与方的数据信息，参与方需要对原始数据进行处理并发送给中心服务端。为了在半可信的执行环境下保护用户的数据隐私，本地差分隐私（Local differential Privacy, LDP）是一个可证明的本地隐私标准，用户可以通过LDP算法对数据进行处理，如扰动处理。在保护用户数据隐私下，服务端对来自用户的扰动数据进行统计分析并得到有价值的信息。现有的专利（如CN114153319A）本地差分隐私算法来分析用户群组的频繁词，该方法采用一个中心服务器收集和分析来自客户端数据，但存在着单点故障带来的风险。并且，一个中心服务端与大量客户端通信交互时会产生较大系统延时。因此，需要设计一种可以解决上述问题的联邦频繁数据分析系统。

## 2、本发明摘要：针对现有技术存在的技术问题，提出本发明的基本方案或基本思路，以及本发明针对现有技术所具备的整体技术效果
<!-- 撰写指导：
不必描述实施细节，概括说明本发明的方案或思路，并说明由这种方案能带来的技术效果。
 -->
本发明公开了一种用于隐私频繁数据挖掘的分层联邦分析系统，并利用本地差分隐私技术保护用户的数据隐私。首先，所有客户端被分到不同群组，且一个辅助服务端管理一个群组并与群组内的客户端进行通讯交互。其次客户端利用本地差分隐私算法对原始数据进行扰动，并将扰动后的数据发送给所在群组的辅助服务端。再次，辅助服务端根据收集到的扰动数据进行统计分析，得到候选频繁数据，并将候选频繁数据发送给联邦服务器。最后，联邦服务器聚合来自辅助服务器的候选频繁数据，并通过重要性指标和相似度量的方法区分出干扰数据，来得到最终前k个频繁数据。
通过该分层联邦分析系统，在保证用户本地数据隐私的同时，降低了联邦服务端的通讯压力，并提高了联邦分析系统的效用及可扩展性。另外，本发明针对频繁数据挖掘提出了用重要性指标和汉明相似度量的聚合联邦分析方法，从而提高了联邦服务端分析算法的容错性和分析结果的准确性。

## 3、本发明技术方案的详细阐述，应该结合机械图、流程图、原理框图、电路图、时序图进行说明
<!-- 撰写指导：
3．1、充分说明本发明每一个详细技术方案，
3．2、本发明技术方案带来的效果的详细描述，不仅要说明本发明整体能带来的效果，而且由于某些技术特征可以直接导致的技术效果，也应该在这里结合技术特征的说明来描述效果；
3．3、充分说明所有可以实现本发明的实施方式，主要从实现本发明的细节角度考虑是否有相类似的方式方法或者其他变形的方法，如果有，则请列出。
 -->

本发明的主要目的是设计一种用于可扩展的联邦频繁数据分析系统。其主要特点是采用分层系统结构，加入多个辅助服务端S^τ管理群组τ，联邦服务端（FA Server）则负责聚合和分析辅助服务端（Auxiliary Server）的结果Ω^τ，并得出最后的预测结果，即前k个频繁数据。这种分层系统结果不仅能够有效减少单点故障的风险，还能降低系统的延时，提高系统效率。为实现上述目的，本发明的具体技术步骤如下：
1.联邦服务端聚合来自于辅助服务端的频繁数据预测结果：
  1a.定义一个重要性指标α(c)=tanh(0.2k+f(c))，其中k为所期望获得的频繁数据的数量，c为辅助服务端对群组频繁数据的预测之一，即c∈Ω^τ, f(c)为c在Ω^τ中的频率密度，f(c)∈(0,1]。
  1b. 统计所有候选频繁数据c的重要性，即∑_(Ω^τ)▒α(c) 。
  1c. 联邦服务端根据频繁数据的重要性对它们进行降序排序，得到Ω_1。
2.联邦服务端分析所聚合得到的Ω_1：
  2a.创建Ω_2来存储前k个频繁数据，初始化所有候选频繁数据的有效性为真。
  2b.遍历Ω_1中的候选频繁数据，c_i=Ω_1 [i]。
  2c.对于有效的c_i和重要性较低的候选频繁数据c_j  (j=i+1,…)，计算两者之间的汉明距离d(c_i,c_j )，即两个位串中不同的比特位数。设定汉明相似度量阈值δ=0.5*len(c_i )，其中len(c_i )为c_i的比特位长。
   (1)如果d(c_i,c_j )  < δ, c_j可以被视为是c_i干扰项，因为c_j的重要指标值更低。从而c_j的有效性改为假。
   (2)将c_i添加到Ω_2中直至Ω_2中的频繁数据数量为k。
3.得到Ω_2中的数据即为预测多方客户端中的前k个频繁数据。

## 4、本发明创新的关键点和想保护的技术方案是什么？
<!-- 撰写指导：
与已知的现有技术相比，本发明会有一些与其不同的关键区别点，这些关键区别点通常会带来明显的或重要的技术效果，这里请说明哪些点是关键区别点，并将这些点可能的组合方案都列举出来。
 -->

第一，本发明提出的联邦分析系统设计采用了分层结构，相比与传统的联邦分析架构，即单点服务端，从而降低了单点故障的风险。
第二，利用辅助服务端管理一部分客户端所组成的群组，例如，相比于一个联邦服务端与1万个用户端进行通讯交互，在联邦服务端与10个辅助服务端进行通讯交互下，一个辅助服务端与1千个客户端进行通讯交互，这降低了联邦服务端的通讯压力，并提高了联邦分析系统的效用及可扩展性。
第三，本发明提出用重要性指标和汉明相似度量的方法使联邦服务端能够聚合辅助服务端的预测结果（即频繁数据），并区分出干扰数据，从而提高了联邦分析算法的容错性和分析结果的准确性。

## 5、本发明可能的变更设计方向或者变形方案？
<!-- 撰写指导：
从整体考虑，是否有整体的替代或变形方案，或者对核心技术特征的替代或变形方案；主要根据本发明体现出来的设计思路，别人能不能想到其他的整体的替代方案来实现；
从另一个角度讲：考虑授权后，站在竞争对手的角度可能提出的回避设计方案。
 -->

（1）设计其他的分布式架构，如多级分层结构和完全去中心化结构等。
（2）采用其他的重要性指标，如数据的频数等。
（3）换用其他相似度度量方式，如欧氏距离等。

## 6、发明人补充的其他观点和思路
<!-- 撰写指导：
除1－5部分还需要补充的部分。
 -->

本发明的系统设计针对半可信执行环境，即服务端具有推断客户端数据的好奇心，但会按照规则执行指令。
在分级结构中最低层为多个客户端群组，一个群组由一个辅助服务端管理。群组内部执行频繁数据挖掘算法，且客户端使用本地差分隐私算法扰动本地数据。在保护用户数据隐私的前提下，辅助服务器可以通过收集和分析这些扰动数据来获得的候选频繁数据，并将其发送给联邦服务器。

## 7、图及说明
<!-- 撰写指导：
1、交底书部分中未提及的附图标记不得在附图中出现，附图中未出现的附图标记不得在交底书文字中提及；
2、附图中除必须词语（如电路或程序的方框图、流程图、波形图等）外，尽量不要包含有其它文字注释；
3、同一部件或部分的附图标记在前后几幅附图中应一致，同一附图标记不得表示不同的部件或部分；
4、附图集中放在交底书文字之后；
5、附图中，零部件的编号可以用数字表示，也可以直接用零部件的名称来表示。
 -->

图一是本发明的联邦分析分层系统设计与频繁数据挖掘算法的流程图。
图二是本发明中联邦服务器端的算法流程图。
图三是本发明中汉明相似度量示意图。
